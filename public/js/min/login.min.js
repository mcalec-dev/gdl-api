document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("loginForm"),n=document.getElementById("error"),t=document.getElementById("loading");async function o(e){e.preventDefault();const t=document.getElementById("username").value,o=document.getElementById("password").value;if(t&&o){a(!0),n.style.display="none";try{const e=await fetch("/gdl/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:o})}),n=await e.json();e.ok?window.location.href="/gdl/":d(n.error||"Login failed")}catch{d("An error occurred while trying to log in")}finally{a(!1)}}else d("Username and password are required")}function d(e){n.textContent=e,n.style.display="block"}function a(e){t&&(t.style.display=e?"block":"none")}document.getElementById("password").addEventListener("keypress",(e=>{"Enter"===e.key&&o(e)})),e.addEventListener("submit",o)}));